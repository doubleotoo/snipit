{% extends "base.html" %}

{% block title %}{{ name }}{% end %}

{% block head %}
    <script src="{{ static_url('js/codemirror.js') }}"></script>
    <script type="text/javascript" src="{{ static_url("copytoclip/copy.js") }}"></script>
        <script type="text/javascript">
        ZeroClipboard.setMoviePath( '{{ static_url("copytoclip/ZeroClipboard.swf") }}' );
        var clip = null;		
        function init(){
            clip = new ZeroClipboard.Client();
            clip.setHandCursor( true );
            clip.glue( 'd_clip_button', 'd_clip_container' );
            clip.setText("{{ SITE_ROOT }}/{{mid}}");
        }; 
    </script>
{% end %}

{% block bodyhooks %} style="" {% end %}
{% block body %}
    <div align="center" style="padding-top:10px;"><h1 style="text-shadow: 1px 1px 1px #fff">[<a href="http://www.google.com/search?q={{name}}" target="_blank" class="hover_link">{{ name }}</a>]</h1>
        <div id="d_clip_container" style="position:relative">
            
            <div id="d_clip_button" class="my_clip_button">Copy Link To Clipboard</div>
            <a class="my_clip_button" href="/fork/{{ mid }}">Fork This Snippet</a>
        </div>
        <div style="margin-top:20px;">
        {% if fork_count == 1 %}
            1 fork.
        {% end %}
        {% if fork_count is not 1 %}
            {{ fork_count }} forks.
        {% end %}
        {% if fork_count is not 0 %}
            - <a class="hover_link" href="/viewforks/{{mid}}">View Forks</a>
        {% end %}
        
        <br />
        {% if forked_from is not None %}
            <div style="padding-bottom:10px;">Forked From: <a id="forklink" href="/{{forked_from}}">{{forked_from}}</a></div>
        {% end %}
        </div>
    </div>

    {% if description is not None %}
        {{ description }}
    {% end %}

    <div id="code_container" class="code_container" style="height:70%;margin-top:0px;">
        <textarea id="codebox">
            {{ code_html }}
        </textarea>
    </div>

    <script> 
      var editor = CodeMirror.fromTextArea(document.getElementById("codebox"), {
        lineNumbers: true,
        mode : "{{ mode }}"
      });
        init();
    </script> 
{% end %}
