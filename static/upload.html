{% extends "base.html" %}

{% block title %}{{ name }}{% end %}
{% block head %}
    <script src="{{ static_url('codemirror.js') }}"></script>
    <link href="{{ static_url('codemirror.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ static_url('default.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ static_url('hl.css') }}" media="screen, projection" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="{{ static_url("copytoclip/copy.js") }}"></script>
    <style type="text/css">
        .my_clip_button { width:150px; text-align:center; border:1px solid black; background-color:#ccc; margin:10px; padding:10px; cursor:default; font-size:9pt; }
        .my_clip_button.hover { background-color:#eee; }
        .my_clip_button.active { background-color:#aaa; }
    </style>
{% end %}
{% block bodyhooks %} onLoad="init()" {% end %}
{% block body %}
    <script type="text/javascript">
        ZeroClipboard.setMoviePath( '{{ static_url("copytoclip/ZeroClipboard.swf") }}' );
        var clip = null;		
        function init() {
            clip = new ZeroClipboard.Client();
            clip.setHandCursor( true );
            clip.glue( 'd_clip_button', 'd_clip_container' );
            clip.setText("{{ SITE_ROOT }}/{{id}}");
        }
    </script>

    <div id="d_clip_container" style="position:relative">
        <div id="d_clip_button" class="my_clip_button"><b>Copy To Clipboard...</b></div>
    </div>
    
    {% if forked_from is not None %}
        <div>Public Link: <a id="publink" href="{{id}}">{{ SITE_ROOT }}/{{id}}</a></div>
        <div style="padding-bottom:100px;">Forked From: <a id="forklink" href="/{{forked_from}}">{{forked_from}}</a></div>
    {% else %}
        <div style="padding-bottom:100px;">Public Link: <a id="publink" href="{{id}}">{{ SITE_ROOT }}/{{id}}</a></div>
    {% end %}
    <div id="code_container" style="height:400px; width:auto;overflow:auto;margin-top:50px;border-top:solid 1px #ccc; border-bottom: solid 1px #ccc">
        <textarea id="codebox" style="height:400px;">
            {{ code_html }}
        </textarea>
    </div>
    
    <script> 
      var editor = CodeMirror.fromTextArea(document.getElementById("codebox"), {
        lineNumbers: true
      });
        // For later use
<!--      function selectTheme(node) {-->
<!--        var theme = node.options[node.selectedIndex].innerHTML;-->
<!--        editor.setOption("theme", theme);-->
<!--      }-->
    </script> 
{% end %}
